function initializeMap(){var e=document.getElementById("search");document.getElementById("slider");const n=document.getElementById("download");document.getElementById("controls");const o={zoom:10,center:"31.407902,34.394186"};function t(){p.moveTo(m.getCenter()),a()}function a(){const t=[];var e;p.getPath().forEach(function(e,o){t.push(e.toUrlValue())}),n.href="http://maps.googleapis.com/maps/api/staticmap?key=AIzaSyB2Q35HUqOoEHJhCNb1b2paI7iEZKPMcTU&maptype="+m.getMapTypeId()+"&format=png32&center="+m.getCenter().toUrlValue()+"&zoom="+m.getZoom()+"&size=640x360&scale=2&path=color:0xFF0000|fillcolor:0xFF0000|weight:2|"+t.join("|"),history.pushState&&(e=window.location.pathname+"?center="+m.getCenter().toUrlValue()+"&zoom="+m.getZoom(),history.replaceState({},document.title,e));const o=document.getElementsByTagName("pre")[0];o.innerHTML='&lt;iframe width="1280" height="720" src="{url}" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;'.replace("{url}",window.location.href)}var g=[new google.maps.LatLng(31.594182039540698,34.490203857421875),new google.maps.LatLng(31.540650975483548,34.56693649291992),new google.maps.LatLng(31.533335603314153,34.565391540527344),new google.maps.LatLng(31.526897601690482,34.55818176269531),new google.maps.LatLng(31.512556821313215,34.54719543457031),new google.maps.LatLng(31.503043865128223,34.52625274658203),new google.maps.LatLng(31.500409336857828,34.51286315917969),new google.maps.LatLng(31.479916027543375,34.48488235473633),new google.maps.LatLng(31.47698804541903,34.4780158996582),new google.maps.LatLng(31.471424626993848,34.47441101074219),new google.maps.LatLng(31.461907486782405,34.46428298950195),new google.maps.LatLng(31.443749028676486,34.44540023803711),new google.maps.LatLng(31.440380540593694,34.43681716918945),new google.maps.LatLng(31.427198336472603,34.4256591796875),new google.maps.LatLng(31.41723721962633,34.4117546081543),new google.maps.LatLng(31.41357477833999,34.4066047668457),new google.maps.LatLng(31.40185400542644,34.39321517944336),new google.maps.LatLng(31.3898386940066,34.37999725341797),new google.maps.LatLng(31.388080226769475,34.380340576171875),new google.maps.LatLng(31.376795945179563,34.373130798339844),new google.maps.LatLng(31.374304427605047,34.373130798339844),new google.maps.LatLng(31.372692233968184,34.37089920043945),new google.maps.LatLng(31.37005403926066,34.37278747558594),new google.maps.LatLng(31.36932119425316,34.37021255493164),new google.maps.LatLng(31.369760901943426,34.36729431152344),new google.maps.LatLng(31.36419111919158,34.36471939086914),new google.maps.LatLng(31.306861822087118,34.37347412109375),new google.maps.LatLng(31.290140312178803,34.366607666015625),new google.maps.LatLng(31.27855085894653,34.34257507324219),new google.maps.LatLng(31.261677590216173,34.33124542236328),new google.maps.LatLng(31.252579445611293,34.31905746459961),new google.maps.LatLng(31.24039829876376,34.290218353271484),new google.maps.LatLng(31.219774825076353,34.26738739013672),new google.maps.LatLng(31.296007846514883,34.23966407775879),new google.maps.LatLng(31.296521238391374,34.23545837402344),new google.maps.LatLng(31.323507044116365,34.21846389770508),new google.maps.LatLng(31.38881292545334,34.2938232421875),new google.maps.LatLng(31.48957771850194,34.39990997314453),new google.maps.LatLng(31.53084824620859,34.43836212158203),new google.maps.LatLng(31.59286607048565,34.48986053466797)];const l=window.location.search.substring(1).split("&");for(const i in l){var s=l[i].split("=");o[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}o.center=o.center.split(",");var m=new google.maps.Map(document.getElementById("map"),{zoom:Number(o.zoom),mapTypeId:google.maps.MapTypeId.ROADMAP,center:new google.maps.LatLng(o.center[0],o.center[1]),scaleControl:!1,rotateControl:!1,streetViewControl:!1,mapTypeControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE],position:google.maps.ControlPosition.TOP_RIGHT},panControl:!0,panControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER},zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_CENTER}});const r=new google.maps.places.SearchBox(e);var p=new google.maps.Polygon({map:m,paths:g,strokeColor:"#FF0000",strokeOpacity:.8,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35,draggable:!0,geodesic:!0});a(),google.maps.event.addListener(r,"places_changed",function(){var e=r.getPlaces();0!==e.length&&(m.setCenter(e[0].geometry.location),m.setZoom(10),p.moveTo(m.getCenter()))}),google.maps.event.addListener(m,"dragend",t),google.maps.event.addListener(m,"zoom_changed",t),google.maps.event.addListener(m,"projection_changed",t),google.maps.event.addListener(m,"zoom_changed",a),google.maps.event.addListener(p,"dragend",a),google.maps.event.addListener(p,"click",function(){var e=p.getCenter();p.rotate(10,e),a()}),Array.prototype.forEach.call(document.getElementsByClassName("btn-rotate"),function(e){e.addEventListener("click",function(e){e.preventDefault();var o=Number(this.dataset.angle),e=p.getCenter();p.rotate(o,e),a()})}),Array.prototype.forEach.call(document.getElementsByClassName("btn-share"),function(e){e.addEventListener("click",function(e){e.preventDefault();let o=this.href;return o=o.replace("{url}",window.location.href),o=o.replace("{text}",encodeURIComponent("Gaza Everywhere: Compare the size of #Gaza to your city")),window.open(o,"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600"),!1})})}function resizeContent(){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0)-(document.getElementsByTagName("header")[0].offsetHeight+document.getElementsByClassName("panel-footer")[0].offsetHeight+document.getElementsByClassName("panel-heading")[0].offsetHeight+30);300<e&&(document.getElementById("map").style.height=e+"px")}window.addEventListener("load",resizeContent),window.addEventListener("resize",resizeContent);